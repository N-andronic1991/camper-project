{"version":3,"file":"CatalogPage-B2sancp1.js","sources":["../../src/components/advertList/AdvertList.jsx","../../src/components/errorMessage/ErrorMessage.jsx","../../src/components/loadMoreBtn/LoadMoreBtn.jsx","../../src/components/searchBar/SearchBar.jsx","../../src/pages/catalogPage/CatalogPage.jsx"],"sourcesContent":["import { useSelector } from 'react-redux';\r\nimport AdvertItem from '../advertItem/AdvertItem';\r\nimport css from './AdvertList.module.css';\r\n\r\nconst AdvertList = () => {\r\n  const adverts = useSelector(state => state.adverts.items);\r\n\r\n  return (\r\n    <ul>\r\n      {Array.isArray(adverts) && adverts.length === 0 && (\r\n        <li>\r\n          <b>We do not have campers by this location</b>\r\n        </li>\r\n      )}\r\n      {Array.isArray(adverts) &&\r\n        adverts.map(advert => {\r\n          return (\r\n            <li key={advert._id} className={css.item}>\r\n              <AdvertItem {...advert} />\r\n            </li>\r\n          );\r\n        })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default AdvertList;\r\n","import PropTypes from 'prop-types';\r\nconst ErrorMessage = ({\r\n  message = 'Oops, something went wrong, please reload the page!',\r\n}) => {\r\n  return <p>{message}</p>;\r\n};\r\n\r\nexport default ErrorMessage;\r\n\r\nErrorMessage.proptypes = {\r\n  message: PropTypes.string.isRequired,\r\n};\r\n","import css from './LoadMoreBtn.module.css';\r\nimport { incrementPage } from '../../redux/adverts/slice';\r\nimport { useDispatch } from 'react-redux';\r\nconst LoadMoreBtn = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const loadMore = () => {\r\n    dispatch(incrementPage());\r\n  };\r\n\r\n  return (\r\n    <button className={css.loadMoreBtn} type=\"button\" onClick={loadMore}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default LoadMoreBtn;\r\n","import css from './SearchBar.module.css';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { selectFiltersLocation } from '../../redux/filters/selectors';\r\nimport { changeFilter } from '../../redux/filters/slice';\r\nimport { icons as sprite } from '../../assets/icons/index.js';\r\n\r\nconst SearchBar = () => {\r\n  const dispatch = useDispatch();\r\n  const filters = useSelector(selectFiltersLocation);\r\n\r\n  const onChangeFilter = event => {\r\n    const location = event.target.value;\r\n    console.log('Location input:', location);\r\n    dispatch(changeFilter(location));\r\n  };\r\n\r\n  return (\r\n    <form className={css.searchBox}>\r\n      <label className={css.label}>\r\n        Location\r\n        <input\r\n          className={css.searchInput}\r\n          type=\"text\"\r\n          name=\"locationSearch\"\r\n          value={filters}\r\n          onChange={onChangeFilter}\r\n          placeholder=\"Kyiv, Ukraine\"\r\n        />\r\n      </label>\r\n      <button className={css.locationBtn}>\r\n        <svg className={css.iconMap} width=\"16\" height=\"16\">\r\n          <use xlinkHref={`${sprite}#icon-map-pin`}></use>\r\n        </svg>\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SearchBar;\r\n","import css from './CatalogPage.module.css';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useEffect } from 'react';\r\n\r\nimport AdvertList from '../../components/advertList/AdvertList';\r\nimport Loader from '../../components/loader/Loader';\r\nimport ErrorMessage from '../../components/errorMessage/ErrorMessage';\r\nimport LoadMoreBtn from '../../components/loadMoreBtn/LoadMoreBtn';\r\nimport SearchBar from '../../components/searchBar/SearchBar';\r\nimport { apiGetAdverts } from '../../redux/adverts/operation';\r\nimport {\r\n  selectAdverts,\r\n  selectError,\r\n  selectLimit,\r\n  selectLoading,\r\n  selectPage,\r\n} from '../../redux/adverts/selectors';\r\nimport { selectSelectedAdvertId } from '../../redux/modal/selectors';\r\nimport BaseModal from '../../components/baseModal/BaseModal';\r\nimport AdvertModalContent from '../../components/advertModalContent/AdvertModalContent';\r\n\r\nconst CatalogPage = () => {\r\n  const dispatch = useDispatch();\r\n  const adverts = useSelector(selectAdverts);\r\n  const loading = useSelector(selectLoading);\r\n  const error = useSelector(selectError);\r\n  const page = useSelector(selectPage);\r\n  const limit = useSelector(selectLimit);\r\n  const selectedAdvertId = useSelector(selectSelectedAdvertId);\r\n  const selectedAdvert = useSelector(state =>\r\n    state.adverts.items.find(advert => advert._id === selectedAdvertId)\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch(apiGetAdverts({ page, limit }));\r\n  }, [dispatch, page, limit]);\r\n\r\n  const showLoadMoreButton = adverts.length % limit === 0 && adverts.length > 0;\r\n\r\n  return (\r\n    <div className={css.catalogContainer}>\r\n      <div className={css.filtersThumb}>\r\n        <SearchBar />\r\n      </div>\r\n      <div>\r\n        {loading && <Loader />}\r\n        {error && <ErrorMessage />}\r\n        {Array.isArray(adverts) && <AdvertList />}\r\n        {showLoadMoreButton && <LoadMoreBtn />}\r\n        <BaseModal>\r\n          {selectedAdvert && (\r\n            <AdvertModalContent\r\n              name={selectedAdvert.name}\r\n              reviews={selectedAdvert.reviews}\r\n              location={selectedAdvert.location}\r\n              price={selectedAdvert.price}\r\n              gallery={selectedAdvert.gallery}\r\n              description={selectedAdvert.description}\r\n            />\r\n          )}\r\n        </BaseModal>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CatalogPage;\r\n"],"names":["AdvertList","adverts","useSelector","state","jsx","advert","css","AdvertItem","ErrorMessage","message","PropTypes","LoadMoreBtn","dispatch","useDispatch","loadMore","incrementPage","SearchBar","filters","selectFiltersLocation","onChangeFilter","event","location","changeFilter","jsxs","sprite","CatalogPage","selectAdverts","loading","selectLoading","error","selectError","page","selectPage","limit","selectLimit","selectedAdvertId","selectSelectedAdvertId","selectedAdvert","useEffect","apiGetAdverts","showLoadMoreButton","Loader","BaseModal","AdvertModalContent"],"mappings":"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"}